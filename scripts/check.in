#!/bin/bash
# check : shorthand for make and ctest -R

if [ $# == 0 -o $# -ge 2 ]
then
  echo "usage: ./check regexp"
  echo "  Makes and runs tests matching the regexp."
  echo "  The EIGEN_JOBS environment variable controls how many"
  echo "  concurrent jobs are launched."
  exit 0
fi

# TODO ctest 2.8 is out, honor the jobs parameter
./buildtests "$1" && ctest -R "$1"
